import { moment } from "obsidian";

const translations: { [key: string]: { [key: string]: string } } = {
    en: {
        "plugin_name": "LinkFlow",
        "notice_sync": "LinkFlow: Data synchronized.",
        "notice_analyzing": "Analyzing {url}...",
        "ribbon_icon_title": "Open LinkFlow",
        "command_open_dashboard": "Open Dashboard (Center)",
        "error_json_corrupted": "Error reading LinkFlow data. JSON might be corrupted.",
        "no_links_recorded": "No links recorded.",
        "table_image": "Image",
        "table_title": "Title",
        "table_description": "Description",
        "table_status": "Status",
        "table_site": "Site",
        "table_date": "Date",
        "status_read": "Read",
        "status_unread": "To Read",
        "search_placeholder": "Search links...",
        "filter_all": "All",
        "filter_unread": "To Read",
        "filter_read": "Read",
        "filter_archived": "Archived",
        "sort_date": "Date",
        "sort_title": "Title",
        "sort_site": "Site",
        "reverse_order": "Reverse order",
        "mode_grid": "Grid Mode",
        "mode_list": "List Mode",
        "select_all": "Select all",
        "deselect_all": "Deselect all",
        "delete_selection": "Delete selection",
        "archive_selection": "Archive selection",
        "unarchive_selection": "Unarchive selection",
        "mark_read": "Mark as read",
        "mark_unread": "Mark as to read",
        "open_link": "Open link",
        "delete": "Delete",
        "archive": "Archive",
        "unarchive": "Unarchive",
        "no_links": "No links found",
        "empty_msg": "Start by adding links or pasting URLs into your target file.",
        "settings_title": "LinkFlow Settings",
        "target_file_name": "Target file",
        "target_file_desc": "Markdown file where links are stored (e.g., TOREAD.md)",
        "target_file_placeholder": "TOREAD.md",

        "modal_add_title": "Add a new link",
        "modal_url_name": "URL or Text",
        "modal_url_desc": "Paste a URL or a text containing multiple links",
        "modal_add_btn": "Add",
        "modal_url_invalid": "No valid URL found",
        "notice_no_links_found": "No links found in the text",
        "confirm_delete_single": "Delete this link permanently?",
        "notice_deleted": "Link deleted",
        "confirm_delete_bulk": "Delete {count} links permanently?",
        "notice_bulk_deleted": "{count} links deleted",
        "notice_refreshed": "Refreshed",
        "hostname_default": "Link",
        "search_placeholder_dashboard": "Search in your links...",
        "filter_archives": "Archives",
        "sort_newest": "Newest",
        "sort_oldest": "Oldest",
        "sort_title_az": "Title (A-Z)",
        "tooltip_grid": "Grid",
        "tooltip_list": "List",
        "tooltip_refresh": "Refresh",
        "tooltip_edit": "Edit Mode",
        "tooltip_add": "Add",
        "edit_selected_count": "{count} selected",
        "edit_cancel": "Cancel",
        "empty_no_links": "No links",
        "empty_no_results": "No results for this search.",
        "empty_add_to_start": "Add links to get started.",
        "overlay_open": "Open",
        "notice_copied": "Copied",

        "log_init": "LinkFlow: Initializing...",
        "log_ready": "LinkFlow: Ready.",
        "inbox_header": "# TOREAD",
        "dashboard_title": "LinkFlow Dashboard",
        "settings_language_name": "Language",
        "settings_language_desc": "Choose the language for the plugin interface",
        "settings_language_auto": "Automatic (Obsidian default)"
    },
    fr: {
        "plugin_name": "LinkFlow",
        "notice_sync": "LinkFlow : Données synchronisées.",
        "notice_analyzing": "Analyse de {url}...",
        "ribbon_icon_title": "Ouvrir LinkFlow",
        "command_open_dashboard": "Ouvrir le Dashboard (Centre)",
        "error_json_corrupted": "Erreur de lecture des données LinkFlow. Le JSON est peut-être corrompu.",
        "no_links_recorded": "Aucun lien enregistré.",
        "table_image": "Image",
        "table_title": "Titre",
        "table_description": "Description",
        "table_status": "Statut",
        "table_site": "Site",
        "table_date": "Date",
        "status_read": "Lu",
        "status_unread": "À lire",
        "search_placeholder": "Rechercher des liens...",
        "filter_all": "Tous",
        "filter_unread": "À lire",
        "filter_read": "Lus",
        "filter_archived": "Archivés",
        "sort_date": "Date",
        "sort_title": "Titre",
        "sort_site": "Site",
        "reverse_order": "Inverser l'ordre",
        "mode_grid": "Mode Grille",
        "mode_list": "Mode Liste",
        "select_all": "Tout sélectionner",
        "deselect_all": "Tout désélectionner",
        "delete_selection": "Supprimer la sélection",
        "archive_selection": "Archiver la sélection",
        "unarchive_selection": "Désarchiver la sélection",
        "mark_read": "Marquer comme lu",
        "mark_unread": "Marquer comme à lire",
        "open_link": "Ouvrir le lien",
        "delete": "Supprimer",
        "archive": "Archiver",
        "unarchive": "Désarchiver",
        "no_links": "Aucun lien trouvé",
        "empty_msg": "Commencez par ajouter des liens ou collez des URLs dans votre fichier cible.",
        "settings_title": "Paramètres LinkFlow",
        "target_file_name": "Fichier cible",
        "target_file_desc": "Fichier markdown où les liens sont stockés (ex: TOREAD.md)",
        "target_file_placeholder": "TOREAD.md",

        "modal_add_title": "Ajouter un nouveau lien",
        "modal_url_name": "URL ou Texte",
        "modal_url_desc": "Collez une URL ou un texte contenant plusieurs liens",
        "modal_add_btn": "Ajouter",
        "modal_url_invalid": "Aucune URL valide trouvée",
        "notice_no_links_found": "Aucun lien trouvé dans le texte",
        "confirm_delete_single": "Supprimer ce lien définitivement ?",
        "notice_deleted": "Lien supprimé",
        "confirm_delete_bulk": "Supprimer {count} liens définitivement ?",
        "notice_bulk_deleted": "{count} liens supprimés",
        "notice_refreshed": "Actualisé",
        "hostname_default": "Lien",
        "search_placeholder_dashboard": "Rechercher dans vos liens...",
        "filter_archives": "Archives",
        "sort_newest": "Plus récents",
        "sort_oldest": "Plus anciens",
        "sort_title_az": "Titre (A-Z)",
        "tooltip_grid": "Grille",
        "tooltip_list": "Liste",
        "tooltip_refresh": "Actualiser",
        "tooltip_edit": "Mode Édition",
        "tooltip_add": "Ajouter",
        "edit_selected_count": "{count} sélectionné(s)",
        "edit_cancel": "Annuler",
        "empty_no_links": "Aucun lien",
        "empty_no_results": "Aucun résultat pour cette recherche.",
        "empty_add_to_start": "Ajoutez des liens pour commencer.",
        "overlay_open": "Ouvrir",
        "notice_copied": "Copié",

        "log_init": "LinkFlow : Initialisation...",
        "log_ready": "LinkFlow : Prêt.",
        "inbox_header": "# À LIRE",
        "dashboard_title": "Tableau de bord LinkFlow",
        "settings_language_name": "Langue",
        "settings_language_desc": "Choisissez la langue de l'interface du plugin",
        "settings_language_auto": "Automatique (Défaut Obsidian)"
    },
    es: {
        "plugin_name": "LinkFlow",
        "notice_sync": "LinkFlow: Datos sincronizados.",
        "notice_analyzing": "Analizando {url}...",
        "ribbon_icon_title": "Abrir LinkFlow",
        "command_open_dashboard": "Abrir Dashboard (Centro)",
        "error_json_corrupted": "Error al leer los datos de LinkFlow. El JSON podría estar dañado.",
        "no_links_recorded": "No hay enlaces registrados.",
        "table_image": "Imagen",
        "table_title": "Título",
        "table_description": "Descripción",
        "table_status": "Estado",
        "table_site": "Sitio",
        "table_date": "Fecha",
        "status_read": "Leído",
        "status_unread": "Por leer",
        "search_placeholder": "Buscar enlaces...",
        "filter_all": "Todos",
        "filter_unread": "Por leer",
        "filter_read": "Leídos",
        "filter_archived": "Archivados",
        "sort_date": "Fecha",
        "sort_title": "Título",
        "sort_site": "Sitio",
        "reverse_order": "Invertir orden",
        "mode_grid": "Modo Cuadrícula",
        "mode_list": "Modo Lista",
        "select_all": "Seleccionar todo",
        "deselect_all": "Deseleccionar todo",
        "delete_selection": "Eliminar selección",
        "archive_selection": "Archivar selección",
        "unarchive_selection": "Desarchivar selección",
        "mark_read": "Marcar como leído",
        "mark_unread": "Marcar como por leer",
        "open_link": "Abrir enlace",
        "delete": "Eliminar",
        "archive": "Archivar",
        "unarchive": "Desarchivar",
        "no_links": "No se encontraron enlaces",
        "empty_msg": "Comience agregando enlaces o pegando URLs en su archivo de destino.",
        "settings_title": "Ajustes de LinkFlow",
        "target_file_name": "Archivo de destino",
        "target_file_desc": "Archivo Markdown donde se guardan los enlaces (ej: TOREAD.md)",
        "target_file_placeholder": "TOREAD.md",

        "modal_add_title": "Añadir un nuevo enlace",
        "modal_url_name": "URL o Texto",
        "modal_url_desc": "Pegue una URL o un texto que contenga varios enlaces",
        "modal_add_btn": "Añadir",
        "modal_url_invalid": "No se ha encontrado ninguna URL válida",
        "notice_no_links_found": "No se han encontrado enlaces en el texto",
        "confirm_delete_single": "¿Eliminar este enlace permanentemente?",
        "notice_deleted": "Enlace eliminado",
        "confirm_delete_bulk": "¿Eliminar {count} enlaces permanentemente?",
        "notice_bulk_deleted": "{count} enlaces eliminados",
        "notice_refreshed": "Actualizado",
        "hostname_default": "Enlace",
        "search_placeholder_dashboard": "Buscar en tus enlaces...",
        "filter_archives": "Archivos",
        "sort_newest": "Más recientes",
        "sort_oldest": "Más antiguos",
        "sort_title_az": "Título (A-Z)",
        "tooltip_grid": "Cuadrícula",
        "tooltip_list": "Lista",
        "tooltip_refresh": "Actualizar",
        "tooltip_edit": "Modo Edición",
        "tooltip_add": "Añadir",
        "edit_selected_count": "{count} seleccionado(s)",
        "edit_cancel": "Cancelar",
        "empty_no_links": "No hay enlaces",
        "empty_no_results": "No hay resultados para esta búsqueda.",
        "empty_add_to_start": "Añade enlaces para empezar.",
        "overlay_open": "Abrir",
        "notice_copied": "Copiado",

        "log_init": "LinkFlow: Inicializando...",
        "log_ready": "LinkFlow: Listo.",
        "inbox_header": "# POR LEER",
        "dashboard_title": "Panel de LinkFlow",
        "settings_language_name": "Idioma",
        "settings_language_desc": "Elija el idioma de la interfaz del plugin",
        "settings_language_auto": "Automático (por defecto de Obsidian)"
    },
    de: {
        "plugin_name": "LinkFlow",
        "notice_sync": "LinkFlow: Daten synchronisiert.",
        "notice_analyzing": "Analysiere {url}...",
        "ribbon_icon_title": "LinkFlow öffnen",
        "command_open_dashboard": "Dashboard öffnen (Mitte)",
        "error_json_corrupted": "Fehler beim Lesen der LinkFlow-Daten. JSON ist möglicherweise beschädigt.",
        "no_links_recorded": "Keine Links aufgezeichnet.",
        "table_image": "Bild",
        "table_title": "Titel",
        "table_description": "Beschreibung",
        "table_status": "Status",
        "table_site": "Seite",
        "table_date": "Datum",
        "status_read": "Gelesen",
        "status_unread": "Zu lesen",
        "search_placeholder": "Links suchen...",
        "filter_all": "Alle",
        "filter_unread": "Zu lesen",
        "filter_read": "Gelesen",
        "filter_archived": "Archiviert",
        "sort_date": "Datum",
        "sort_title": "Titel",
        "sort_site": "Seite",
        "reverse_order": "Reihenfolge umkehren",
        "mode_grid": "Gittermodus",
        "mode_list": "Listenmodus",
        "select_all": "Alle auswählen",
        "deselect_all": "Alle abwählen",
        "delete_selection": "Auswahl löschen",
        "archive_selection": "Auswahl archivieren",
        "unarchive_selection": "Auswahl dearchivieren",
        "mark_read": "Als gelesen markieren",
        "mark_unread": "Als zu lesen markieren",
        "open_link": "Link öffnen",
        "delete": "Löschen",
        "archive": "Archivieren",
        "unarchive": "Dearchivieren",
        "no_links": "Keine Links gefunden",
        "empty_msg": "Fügen Sie Links hinzu oder fügen Sie URLs in Ihre Zieldatei ein.",
        "settings_title": "LinkFlow Einstellungen",
        "target_file_name": "Zieldatei",
        "target_file_desc": "Markdown-Datei, in der Links gespeichert werden (z. B. TOREAD.md)",
        "target_file_placeholder": "TOREAD.md",

        "modal_add_title": "Neuen Link hinzufügen",
        "modal_url_name": "URL oder Text",
        "modal_url_desc": "Fügen Sie eine URL oder einen Text mit mehreren Links ein",
        "modal_add_btn": "Hinzufügen",
        "modal_url_invalid": "Keine gültige URL gefunden",
        "notice_no_links_found": "Keine Links im Text gefunden",
        "confirm_delete_single": "Diesen Link dauerhaft löschen?",
        "notice_deleted": "Link gelöscht",
        "confirm_delete_bulk": "{count} Links dauerhaft löschen?",
        "notice_bulk_deleted": "{count} Links gelöscht",
        "notice_refreshed": "Aktualisiert",
        "hostname_default": "Link",
        "search_placeholder_dashboard": "In Ihren Links suchen...",
        "filter_archives": "Archive",
        "sort_newest": "Neueste",
        "sort_oldest": "Älteste",
        "sort_title_az": "Titel (A-Z)",
        "tooltip_grid": "Gitter",
        "tooltip_list": "Liste",
        "tooltip_refresh": "Aktualisieren",
        "tooltip_edit": "Bearbeitungsmodus",
        "tooltip_add": "Hinzufügen",
        "edit_selected_count": "{count} ausgewählt",
        "edit_cancel": "Abbrechen",
        "empty_no_links": "Keine Links",
        "empty_no_results": "Keine Ergebnisse für diese Suche.",
        "empty_add_to_start": "Fügen Sie Links hinzu, um zu beginnen.",
        "overlay_open": "Öffnen",
        "notice_copied": "Kopiert",

        "log_init": "LinkFlow: Initialisierung...",
        "log_ready": "LinkFlow: Bereit.",
        "inbox_header": "# ZU LESEN",
        "dashboard_title": "LinkFlow Dashboard",
        "settings_language_name": "Sprache",
        "settings_language_desc": "Wählen Sie die Sprache für die Plugin-Oberfläche",
        "settings_language_auto": "Automatisch (Obsidian-Standard)"
    },
    it: {
        "plugin_name": "LinkFlow",
        "notice_sync": "LinkFlow: Dati sincronizzati.",
        "notice_analyzing": "Analisi di {url}...",
        "ribbon_icon_title": "Apri LinkFlow",
        "command_open_dashboard": "Apri Dashboard (Centro)",
        "error_json_corrupted": "Errore nella lettura dei dati LinkFlow. Il JSON potrebbe essere corrotto.",
        "no_links_recorded": "Nessun link registrato.",
        "table_image": "Immagine",
        "table_title": "Titolo",
        "table_description": "Descrizione",
        "table_status": "Stato",
        "table_site": "Sito",
        "table_date": "Data",
        "status_read": "Letto",
        "status_unread": "Da leggere",
        "search_placeholder": "Cerca link...",
        "filter_all": "Tutti",
        "filter_unread": "Da leggere",
        "filter_read": "Letti",
        "filter_archived": "Archiviati",
        "sort_date": "Data",
        "sort_title": "Titolo",
        "sort_site": "Sito",
        "reverse_order": "Inverti ordine",
        "mode_grid": "Modalità Griglia",
        "mode_list": "Modalità Elenco",
        "select_all": "Seleziona tutto",
        "deselect_all": "Deseleziona tutto",
        "delete_selection": "Elimina selezione",
        "archive_selection": "Archivia selezione",
        "unarchive_selection": "Ripristina selezione",
        "mark_read": "Segna come letto",
        "mark_unread": "Segna come da leggere",
        "open_link": "Apri link",
        "delete": "Elimina",
        "archive": "Archivia",
        "unarchive": "Ripristina",
        "no_links": "Nessun link trovato",
        "empty_msg": "Inizia aggiungendo link o incollando URL nel tuo file di destinazione.",
        "settings_title": "Impostazioni LinkFlow",
        "target_file_name": "File di destinazione",
        "target_file_desc": "File markdown dove vengono salvati i link (es: TOREAD.md)",
        "target_file_placeholder": "TOREAD.md",

        "modal_add_title": "Aggiungi un nuovo link",
        "modal_url_name": "URL o Testo",
        "modal_url_desc": "Incolla un URL o un testo contenente più link",
        "modal_add_btn": "Aggiungi",
        "modal_url_invalid": "Nessun URL valido trovato",
        "notice_no_links_found": "Nessun link trovato nel testo",
        "confirm_delete_single": "Eliminare questo link permanentemente?",
        "notice_deleted": "Link eliminato",
        "confirm_delete_bulk": "Eliminare {count} link permanentemente?",
        "notice_bulk_deleted": "{count} link eliminati",
        "notice_refreshed": "Aggiornato",
        "hostname_default": "Link",
        "search_placeholder_dashboard": "Cerca tra i tuoi link...",
        "filter_archives": "Archivi",
        "sort_newest": "Più recenti",
        "sort_oldest": "Più vecchi",
        "sort_title_az": "Titolo (A-Z)",
        "tooltip_grid": "Griglia",
        "tooltip_list": "Elenco",
        "tooltip_refresh": "Aggiorna",
        "tooltip_edit": "Modalità Modifica",
        "tooltip_add": "Aggiungi",
        "edit_selected_count": "{count} selezionato(i)",
        "edit_cancel": "Annulla",
        "empty_no_links": "Nessun link",
        "empty_no_results": "Nessun risultato per questa ricerca.",
        "empty_add_to_start": "Aggiungi link per iniziare.",
        "overlay_open": "Apri",
        "notice_copied": "Copiato",

        "log_init": "LinkFlow: Inizializzazione...",
        "log_ready": "LinkFlow: Pronto.",
        "inbox_header": "# DA LEGGERE",
        "dashboard_title": "Dashboard LinkFlow",
        "settings_language_name": "Lingua",
        "settings_language_desc": "Scegli la lingua per l'interfaccia del plugin",
        "settings_language_auto": "Automatica (predefinita di Obsidian)"
    }
};

let currentLang = window.localStorage.getItem("language") || "en";

export const setLanguage = (lang: string) => {
    if (lang === 'auto') {
        currentLang = window.localStorage.getItem("language") || "en";
    } else {
        currentLang = lang;
    }
};

export const t = (key: string, vars?: { [key: string]: string }): string => {
    let text = (translations[currentLang] && translations[currentLang][key]) || translations["en"][key] || key;

    if (vars) {
        for (const [vKey, vVal] of Object.entries(vars)) {
            text = text.replace(`{${vKey}}`, vVal);
        }
    }

    return text;
};
